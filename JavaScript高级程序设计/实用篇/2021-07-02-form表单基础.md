## 表单

### 表单基础
- Web表单在HTML中以`<form>`元素表示，在JS中以HTMLFormElement类型表示。
- HTMLFormElement类型继承自HTMLElement类型，拥有与其他HTML元素一样的默认属性。
- HTMLFormElement类型也有自己的属性和方法：
  - acceptCharset：服务器可以接收的字符集，等价于HTML的accept-charset属性。
  - action：请求URL，等价于HTML的action属性。
  - elements：表单中所有控件的HTML的action属性。
  - enctype：请求的编码类型，等价于HTML的enctype属性。
  - length：表单中控件的数量。
  - method：HTTP请求的方法类型，等价于HTML的method属性。
  - name：表单的名字，等价于HTML的name属性。
  - reset()：把表单字段重置为各自默认值。
  - submit()：提交表单。
  - target：用于发送请求和接收响应的窗口的名字，等价于HTML的target属性。

- 取得对`<form>`元素的引用的方式：
  - 1.给form元素指定一个id属性，使用getElementById()来获取表单
  - 2.使用`document.forms`集合可以获取页面上所有的表单元素。然后可以进一步使用数字索引或表单的名字name来访问特定的表单

  ```js
    // 取得页面中的第一个表单
    let firstForm = document.forms[0];

    // 取得名字为“form2”的表单
    let myForm = document.forms["form2"];
  ```

  - 表单可以同时拥有id和name，而且两者可以不相同。

#### 提交表单
- 通过用户点击提交按钮或图片按钮的方式提交的。
- 提交按钮可以使用type属性为"submit"的`<input>`或`<button>`元素来定义，图片按钮可以使用type属性为image的`<input>`元素来定义。

```html
  <!-- 通过提交按钮 -->
  <input type="submit" value="Submit Form">

  <!-- 自定义提交按钮 -->
  <button type="submit">Submit Form</button>

  <!-- 图片按钮 -->
  <input type="image" src="go.gif">
```

- 以这种方式提交表单会向服务器发送请求前触发submit事件。这样就提供了一个验证表单数据的机会，可以根据验证结果决定是否真的提交。阻止这个事件的默认行为可以取消提交表单

```js
  let form = document.getElementById("myForm");
  form.addEventListener("submit", (event) => {
    // 阻止表单提交
    event.preventDefault();
  })

  // 提交表单
  form.submit();
```

- 调用preventDefault()方法可以阻止表单提交。通常在表单数据无效以及不应该发送到服务器时，这样处理。
- 通过submit()提交表单时，submit事件不会被触发。因此在调用这个方法前要先做数据验证。

- 表单提交的一个最大问题就是可能会提交2次表单
  - 造成的原因：服务器接口慢，用户误触
  - 解决办法：
    - 在表单提交后禁用提交按钮
    - 通过onsubmit事件处理程序取消之后的表单提交

### 重置表单
- 用户单击重置按钮可以重置表单。
- 重置按钮可以使用type属性为"reset"的`<input>`或`<button>`元素来创建，比如：

```html
  <input type="reset" value="Reset Form">

  <button tyoe="reset">Reset Button</button>

  <!--如何阻止重置表单-->
  let form = document.getElementById("myForm");

  form.addEventListener("reset", (event) => {
    event.preventDefault();
  });

  <!--重置表单-->
  form.reset()
```

- 与submit()方法的功能不同，调用reset()方法会像单击了重置按钮一样触发reset事件。

- 通常不提倡重置表单

### 表单字段
- 表单元素可以像页面中的其他元素一样使用原生DOM方法来访问。
- 所有表单元素都是表单elements属性（元素集合）中包含的一个值。
- 这个elements集合是一个有序列表，包含对表单中所有字段的引用
  - 包括所有`<input>`、`<textarea>`、`<button>`、`<select>`和`<fieldset>`元素。
  - elements集合中的每个字段都以它们在HTML标记中出现的次序保存，可以通过索引位置和name属性来访问。

```js
  let form = document.getElementById("form1");
  // 取得表单中的第一个字段
  let field1 = form.elements[0];  
  // 取得表单中名为"textbox1"的字段
  let field2 = form.elements["textbox1"];  
  // 取得字段的数量
  let fieldCount = form.elements.length;
```

- 如果多个表单控件使用了同一个name，则会返回包含所有同名元素的HTMLCollection。

- 【注意】也可以通过表单属性的方式访问表单字段，比如`form[0]`这种使用索引和`form ["color"]`这种使用字段名字的方式。访问这些属性与访问`form.elements`集合是一样的。这种方式是为向后兼容旧版本浏览器而提供的，实际开发中应该使用`elements`。

1. 表单字段的公共属性
  - 除了`<fieldset>`元素以外，所有表单字段都有一组通用的属性。

  - 表单字段的公共属性和方法
    - disabled，
    - form，指针，指向表单字段所属的表单。这个属性是只读的。
    - name，字段名
    - readOnly，是否只读
    - tabIndex，数值，表示这个字段在按Tab键时的切换顺序
    - type，表示字段类型，如“checkbox”、“radio”
    - value，要提交给服务器的字段值。对文件输入字段来说，这个属性是只读的，仅包含计算机上某个文件的路径。

  - 除了form属性以外，JS可以动态修改任何属性

  ```js
    let form = document.getElementById("myForm");
    let field = form.element[0];

    // 修改字段的value
    field.value = "Another value";

    // 检测字段所属表单
    field.form === form // true

    // 给字段设置焦点
    field.focus();

    // 禁用字段
    field.disabled = true;

    // 改变字段的类型（不推荐，但对<input>来说是可能的）
    field.type = "checkbox"
  ```

  - 通过监听submit事件来实现点击提交之后禁用提交按钮

  ```js
    let form = document.getElementById("myForm");

    form.addEventListener("submit", (event) => {
      let target = event.target;

      //取得提交按钮
      let btn = target.elements["submit-btn"];

      // disabled
      btn.disabled = true;
    })
  ```

- type属性可以用于除`<fieldset>`之外的任何表单字段。
  - 对于`<input>`元素这个值等于HTML的type属性值。
  - 对于其他元素，这个type属性的值按照下表设置。

  | 描述 | 示例HTML | 类型的值 |
  | --- | ---| --- |
  | 单选列表 | `<select>...</select>` | "select-one" |
  | 多选列表 | `<select multiple>...</select>` | "select-multipe" |
  | 自定义按钮 | `<button>...</button>` | "submit" |
  | 自定义非提交按钮 | `<button type="button">...</button>` | "button" |
  | 自定义重置按钮 | `<button type="reset">...</button>` | "reset" |
  | 自定义提交按钮 | `<button type="submit">...</button>` | "submit" |

  - 对于`<input>`和`<button>`元素，可以动态修改其type属性。但`<select>`元素的type属性是只读的。

2. 表单字段的公共方法
